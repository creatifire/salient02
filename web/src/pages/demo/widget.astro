---
import Layout from '../../layouts/Layout.astro';
---
<Layout>
  <section style="padding:2rem 0;">
    <h1 style="font-size:2rem;margin:0 0 .5rem;">Widget Demo - Multi-Tenant Chat</h1>
    <p>The floating chat widget now supports multi-tenant endpoints with account and agent configuration.</p>
    
    <h2 style="font-size:1.5rem;margin:2rem 0 1rem;">Basic Usage (Default Account)</h2>
    <p>Simple inclusion uses <code>default_account</code> and <code>simple_chat1</code> by default:</p>
    <pre style="background:#f5f5f5;padding:1rem;border-radius:.5rem;white-space:pre-wrap;">&lt;script src="/widget/chat-widget.js" is:inline&gt;&lt;/script&gt;</pre>
    
    <h2 style="font-size:1.5rem;margin:2rem 0 1rem;">Custom Account & Agent</h2>
    <p>Specify different account and agent using data attributes:</p>
    <pre style="background:#f5f5f5;padding:1rem;border-radius:.5rem;white-space:pre-wrap;">&lt;script 
  src="/widget/chat-widget.js" 
  data-account="acme" 
  data-agent="acme_chat1"
  is:inline&gt;
&lt;/script&gt;</pre>
    
    <h2 style="font-size:1.5rem;margin:2rem 0 1rem;">All Configuration Options</h2>
    <pre style="background:#f5f5f5;padding:1rem;border-radius:.5rem;white-space:pre-wrap;font-size:0.9rem;">&lt;script 
  src="/widget/chat-widget.js" 
  data-account="default_account"
  data-agent="simple_chat1"
  data-backend="http://localhost:8000"
  data-allow-cross="1"
  data-sse="1"&gt;
&lt;/script&gt;</pre>
    <p style="font-size:0.9rem;color:#666;margin-top:0.5rem;">
      <strong>Attributes:</strong><br>
      • <code>data-account</code> - Account slug (default: default_account)<br>
      • <code>data-agent</code> - Agent instance slug (default: simple_chat1)<br>
      • <code>data-backend</code> - Backend URL (default: current origin)<br>
      • <code>data-allow-cross</code> - Enable CORS (default: 0)<br>
      • <code>data-sse</code> - Enable SSE streaming (default: 1)
    </p>
    
    <h2 style="font-size:1.5rem;margin:2rem 0 1rem;">Test It Out</h2>
    <p>Click the "Chat" button in the bottom right corner to start chatting with <strong>default_account/simple_chat1</strong>.</p>
  </section>
  <script is:inline>
    // Set widget configuration BEFORE loading the script
    window.__SALIENT_WIDGET_CONFIG = {
      backend: 'http://localhost:8000',
      account: 'default_account',
      agent: 'simple_chat1',
      allowCross: true  // Enable CORS for cross-origin (4321 -> 8000)
    };
  </script>
  <script is:inline src="/widget/chat-widget.js?v=8"></script>
</Layout>
