app:
  name: Salient
  mode: multi-tenant  # single-tenant|multi-tenant

database:
  # Database URL is loaded from DATABASE_URL environment variable for security
  # Example: DATABASE_URL=postgresql+asyncpg://user:pass@localhost:5432/dbname
  pool_size: 20
  max_overflow: 0
  pool_timeout: 30

session:
  cookie_name: "salient_session"
  cookie_max_age: 604800  # 7 days
  cookie_secure: false    # true in production (set via environment)
  cookie_httponly: true
  cookie_samesite: "none"  # "none" for cross-origin (changed for development)
  cookie_domain: "localhost"     # Set to localhost for development cross-origin sharing
  inactivity_minutes: 30  # Session timeout after 30 minutes of inactivity
  # Cross-origin settings for development
  production_cross_origin: true  # Enable cross-origin session sharing for development

redis:
  # Redis URL is loaded from REDIS_URL environment variable for security
  # Example: REDIS_URL=redis://localhost:6379/0
  session_db: 1
  cache_db: 2

chat:
  inactivity_minutes: 30
  history_limit: 50                    # Maximum number of messages to load from chat history
  input:
    debounce_ms: 1000
    submit_shortcut: ctrl+enter
    enter_inserts_newline: true

email:
  mock_sales_recipient: sales@example.com

logging:
  level: INFO           # DEBUG|INFO|WARN|ERROR
  prefix: salient-log-             # File prefix; final name will be '<prefix><timestamp>.jsonl'
  path: ./logs/                   # Directory for logs (relative to backend directory)
  rotation: 00:30                  # Options: '50 MB', '1 day', '1 hour', '00:30', '00:15'
  retention: 14 days               # How many old logs to keep (or time span)
  compression: zip                 # Optional: zip, gz, bz2
  enqueue: true                    # Use a background thread for IO (safer under concurrency)
  frontend_debug: true

vector:
  pinecone:
    index_name: agrofresh01

embeddings:
  model: text-embedding-3-small

llm:
  provider: openrouter
  model: deepseek/deepseek-chat-v3.1
  temperature: 0.3
  max_tokens: 1024

legacy:
  enabled: true                   # Can be toggled to false for parallel development
  endpoints:
    chat: "/chat"                  # Legacy chat endpoint
    stream: "/events/stream"       # Legacy SSE streaming
    main: "/"                      # Main chat page

ui:
  sse_enabled: true
  allow_basic_html: true
  expose_backend_chat: true  # when false, hide GET / chat UI in production
  expose_backend_logs: true  # dev-only log tail endpoint
  logs_tail_count: 10        # default N lines for /dev/logs/tail

agents:
  default_agent: simple_chat           # Which agent to use by default
  available_agents:                    # List of available agent types
    - simple_chat
  configs_directory: ./config/agent_configs/  # Agent YAML files location
  
# Route-specific agent assignments (optional)
routes:
  "/chat": simple_chat                 # Legacy endpoint uses simple_chat
  "/agents/simple-chat": simple_chat   # Explicit agent routing
